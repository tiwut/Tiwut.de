<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiwut Chat</title>
    <script defer src="script.js" type="module"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="icon.ico" type="image/x-icon">
</head>
<body>
    <div class="status-bar-mock"></div>

    <div class="app-container">
        <div id="chat-app" class="chat-container">

            <aside class="sidebar">
                <header class="sidebar-header">
                    <div id="user-profile-menu" class="user-profile-menu">
                        <button id="account-button" class="account-button" data-translate-aria-label="accountMenuAriaLabel">
                            <div id="user-avatar-wrapper" class="avatar-display"></div>
                            <span id="header-username"></span>
                        </button>
                        <div id="account-dropdown" class="account-dropdown"></div>
                    </div>

                    <div id="language-selector" class="language-selector">
                        <button id="language-button" class="icon-button" data-translate-title="changeLanguage">
                            üåê <span id="current-lang-text">EN</span>
                        </button>
                        <ul id="language-dropdown" class="language-dropdown" style="display: none;">
                            <li><button data-lang="en">English</button></li>
                            <li><button data-lang="de">Deutsch</button></li>
                            <li><button data-lang="es">Espa√±ol</button></li>
                        </ul>
                    </div>

                    <div class="sidebar-actions">
                        <button id="create-chat-btn" class="icon-button logged-in" style="display: none;" data-translate-title="createChatTitle">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2zM6 9h2v2H6V9zm8 2h-2V9h2v2zm4-2h-2V9h2v2z"></path></svg>
                        </button>
                    </div>
                </header>
                
                <div id="create-chat-form-container" style="display: none;">
                    <form id="create-chat-form">
                        <input type="text" id="new-chat-name" data-translate-placeholder="newRoomPlaceholder" required maxlength="50">
                        <button type="submit" class="cta-button" data-translate="create"></button>
                        <button type="button" id="cancel-chat-btn" class="cta-button secondary" data-translate="cancel"></button>
                    </form>
                </div>

                <div class="chat-search-container">
                    <input type="search" id="chat-search" data-translate-placeholder="searchPlaceholder">
                </div>

                <div id="login-prompt" class="login-prompt" style="display: none;">
                    <p data-translate="loginPromptText"></p>
                    <a href="login.html" class="cta-button" data-translate="login"></a>
                </div>

                <ul id="chat-room-list" class="chat-room-list">
                    <li class="no-chats-placeholder" data-translate="loadingChats"></li>
                </ul>
            </aside>

            <main id="main-chat-area" class="main-chat-area">
                <div id="chat-placeholder" class="chat-placeholder">
                    <svg class="placeholder-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="#AEBAC1" d="M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7z"/>
                        <path fill="#E9EDEF" d="M412 432c-20.4-32.2-22.4-70.4-5.9-105.7c26.5-56.5 83.4-98.3 155.6-98.3c2.2 0 4.3 0.1 6.4 0.2C542.8 126.3 436.5 48 312 48C165.3 48 48 128.5 48 208s117.3 160 264 160c32.5 0 63.8-5.6 92.6-15.9c16.3-5.8 34.4-4.2 49.3 4.5c19.1 11.1 36.3 24.1 50.1 38.3C456.3 432 433.8 432 412 432z"/>
                    </svg>
                    <h2 data-translate="tiwutChat"></h2>
                    <p data-translate="selectAChat"></p>
                </div>

                <div id="active-chat-container" class="active-chat-container" style="display: none;">
                    <header class="chat-header">
                        <button id="back-to-list-btn" class="icon-button back-button">
                           <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#fff"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                        </button>
                        <h2 id="chat-room-title"></h2>
                    </header>
                    <div id="chatbox" class="chatbox"></div>
                    <div id="input-area" class="input-area">
                        <input type="text" id="message" data-translate-placeholder="typeMessagePlaceholder" maxlength="500" disabled>
                        <button id="send" class="icon-button send-button" disabled>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                        </button>
                    </div>
                     <div id="chat-status" class="chat-status"></div>
                </div>
            </main>
        </div>
    </div>
</body>
</html>